@import "compass";

ul.wpsstm-tracklist-actions{
    margin: 1em 0;
    .wpsstm-action{
        font-size:.8em;
        border: 1px solid #F7F7F7;
        line-height: 1.8em;
    }
    
}

.tracklist-list{ //output a simplier style
    .tracklist-header{
        display:none!important;
    }
    .wpsstm-tracks-list{
        position:relative;
        padding:0;
        margin:0;
        list-style: none;
    }

}

.wpsstm-tracklist{
    
    &.wpsstm-loved-tracklist .wpsstm-tracklist-action-favorite{
        display:none!important;
    }
    .wpsstm-tracklist-action-unfavorite{
        display:none!important;
    }

    &.tracklist-loading, &:not(.tracklist-expired){
        .wpsstm-tracklist-action-refresh{
            pointer-events:none;
        }
    }
    
    &.tracklist-playable [itemprop="track"]{

        &[data-wpsstm-sources-count="0"]{
            @include opacity(.25);
        } 

        &:not(.track-active){
            @include opacity(.5);
        }

        &.track-has-played,&:hover{
            @include opacity(.75);
        }

        &.track-active{
            @include opacity(1);
        }
    }

    &:not(.tracklist-playable) [itemprop="track"]{
        .wpsstm-track-play-bt{
            display:none;
        }
    }

    .tracklist-header{
        border-bottom:1px solid #F7F7F7;
        padding:.25em;

        .wpsstm-tracklist-icon{
            @include opacity(.15);
        }

        .wpsstm-live-tracklist-link{
            display:block;
            margin: .5em 0;
            @extend .wpsstm-no-underline;
        }
        
        .wpsstm-tracklist-refresh-time{
            @include opacity(.25);
        }
    }

    &.wpsstm-live-tracklist{
        .wpsstm-tracklist-title{
            @extend .wpsstm-icon;
            &:before{
                content: "\f09e";
            }
        }
    }

    &.tracklist-loading{
        .wpsstm-tracklist-icon{
            @extend .wpsstm-loading-icon;
        }
    }

    &:not(.tracklist-playing) .wpsstm-tracklist-icon:before,&.tracklist-pause .wpsstm-tracklist-icon:before{
        content:"\f04b"; //.fa-play
    }

    &.tracklist-playing .wpsstm-tracklist-icon:before{
        content:"\f04c"; //.fa-pause;
    }

    &.tracklist-error .wpsstm-tracklist-icon:before{
        content:"\f071"; //.fa-exclamation-triangle;
    }

    &:not(.tracklist-expired){
        .wpsstm-tracklist-action-refresh{
            @include opacity(.5);
        }
    }

    &:not(.tracklist-refresh) #wpsstm-notice-ajax-refresh{
        display:none;
    }

    &.ajax-tracklist{

        &.tracklist-refresh{
            > * {
                display:none;
                &.tracklist-header,&.wpsstm-tracklist-notices{
                    display:inherit;
                }
                &.wpsstm-tracklist-notices > *{
                    display:none;
                    &#wpsstm-notice-ajax-refresh{
                        display:inherit;
                    }
                }
                .wpsstm-tracklist-time{
                    display:none;
                }

            }
        }
    }
    
    .wpsstm-new-subtrack{
        form{
            margin-top: 1em;
            @include display-flex();
            > * {
                margin: 0 .5em;
            }
        }

    }

}

.wpsstm-tracklist.wpsstm-post-tracklist{
    .wpsstm-track{
        
        &.track-active{
            background: rgba(252, 248, 227, .5);
        }

        .wpsstm-track-sources{
            display:none;
            .wpsstm-expand-sources{
                margin-left: auto;
            }
        }

        .wpsstm-track-actions{
            margin-left: auto;
        }
    }
}

.wpsstm-tracklist.wpsstm-player-tracklist{
    .wpsstm-track{
        display:block!important;
        .wpsstm-track-actions{
            margin-left:inherit;
        }
        .wpsstm-track-sources{
            @include opacity(.6);
            [data-wpsstm-source-idx]{
                @include opacity(.6);
                &.source-playing{
                    @include opacity(.8);
                }
                &:hover{
                    @include opacity(1);
                }
            }
        }
    }
}

.wpsstm-tracklist-actions{
    display:block;
    margin: 1em;
    list-style: none;
    line-height: 2.8em;

    .wpsstm-tracklist-action{
        &.wpsstm-tracklist-action-refresh a:before{
            content:"\f021";//.fa-refresh;
        }
        &.wpsstm-tracklist-action-share a:before{
            content:"\f1e0";//.fa-share-alt;
        }
        &.wpsstm-tracklist-action-export a:before{
            content:"\f019";//.fa-download;
        }

        &.wpsstm-tracklist-action-favorite a:before{
            content:"\f08a";//.fa-heart-o;
        }
        &.wpsstm-tracklist-action-unfavorite a:before{
            content:"\f004";//.fa-heart;
        }

        &.wpsstm-tracklist-action-new-subtrack{
             a:before{
                 content:"\f055";//.fa-plus-circle;
            }
        }
        &.wpsstm-tracklist-action-make-live,
        &.wpsstm-tracklist-action-make-static{
            a:before{
                content:"\f09e";//.fa-rss;
            }
            &.wpsstm-tracklist-action-make-live{
                a:before{
                    @include opacity(.25);
                }
            }
        }
        &.wpsstm-tracklist-action-edit-backend a:before{
            content:"\f084";//.fa-key;
        }
        &.wpsstm-tracklist-action-trash a:before{
            content: "\f1f8";//.fa-trash;
        }
    }

}

#tracklists-manager{
    > li{
        border-bottom: 1px solid rgba(51, 51, 51, 0.1);
        @include display-flex();
        height: 1em;
        padding: 1em 0;
        > *{
            @include display-flex();
            @include flex-grow(1);
            align-items: center;
            padding: 0 .25em;
            box-sizing: border-box;
            max-width:50%;
            &.wpsstm-tracklist-title{
                a{
                    @extend .wpsstm-ellipsis;
                }
                .wpsstm-tracklist-post-state{
                    &.wpsstm-tracklist-post-state-publish{
                        display:none;
                    }
                }
            }
            &.wpsstm-tracklist-actions{
                @include justify-content(space-between);
                @include flex-grow(0);
                @include flex-shrink(0);
                text-align:right;
                visibility:hidden;
                ul{
                    display:inline;
                    li{
                        display:inline;
                        @extend .wpsstm-action-icon;
                    }
                }
            }
        }
        &:hover{
            .wpsstm-tracklist-actions{
                visibility:visible;
            }
        }

    }
}