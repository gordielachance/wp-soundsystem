@import "compass";
@import "wpsstm-shared";

.wpsstm-actions-list{
    li{
        &.wpsstm-action-toggle-favorite:not(.wpsstm-toggle-favorite-active){
            display:none;
        }
        &#wpsstm-tracklist-action-status-switch{
            form{
                display:none;
                select{
                    font-size:1em;
                }
                em{
                    @include opacity(.5);
                }
            }
            &.expanded{
                em{
                    display:none;
                }
                form{
                   display:inline-block; 
                }
            }
        }
    }
}

.wpsstm-tracklist{
    position:relative;
    
    .wpsstm-tracklist-loading-icon{
        visibility:hidden;
    }
    
    &.tracklist-loading{
        .wpsstm-tracklist-loading-icon{
            visibility:visible;
        }
    }
    
    .tracklist-nav{
        ul#wpsstm-tracklist-actions{
            display:block;
            margin: 1em;
            list-style: none;
        }
    }
    
    &:not(.tracklist-expired){
        .tracklist-nav{
            ul#wpsstm-tracklist-actions{
                li#wpsstm-tracklist-action-refresh{
                    pointer-events:none;
                    @include opacity(.5);
                }
            }
        }
    }
    
    &.tracklist-ajaxed{
        
        #wpsstm-notice-ajax-refresh{
            display:none;
        }
        
        &.tracklist-refresh{
            > * {
                display:none;
                &#wpsstm-notice-ajax-refresh,&.tracklist-nav{
                    display:inherit;
                }
            }
        }
    }

    &.wpsstm-playable-tracklist{
        
        .wpsstm-tracks-list{
        
            [itemprop="track"]{
                
                &[data-wpsstm-sources-count="0"]{
                    @include opacity(.25);
                } 

                &:not(.track-active){
                    td{
                        @include opacity(.5);
                    }
                }

                &.track-has-played,&:hover{
                    td{
                        @include opacity(.75);
                    }
                }

                &.track-active{
                    td{
                        @include opacity(1);
                    }
                }

                .track-play-bt{
                    .wpsstm-player-icon{
                        display:none;
                        &.wpsstm-player-icon-play{
                            display:inline-block;
                        }
                    }
                }

                &.track-loading{
                    .wpsstm-track-position{
                        .wpsstm-player-icon-loading{
                            display:inline-block;
                        }
                        span{
                            display:none;
                        }
                    }
                }
                &.track-playing .track-play-bt{
                    .wpsstm-player-icon{
                        display:none;
                    }
                    .wpsstm-player-icon-pause{
                        display:inline-block;
                    }
                }

                &.track-error .track-play-bt{
                    .wpsstm-player-icon{
                        display:none;
                    }
                    .wpsstm-player-icon-error{
                        display:inline-block;
                    }
                }
            }
        }
    }
    
    .wpsstm-tracks-list{

        [itemprop="track"]{

            .wpsstm-track-image{
                img{
                    height:2em;
                    width: auto;
                    vertical-align: middle;
                }

            }

           .wpsstm-track-position{

                .wpsstm-player-icon-loading{
                    display:none;
                }
                span{
                    display:initial;
                }

                .wpsstm-reposition-track{
                    display:none;
                    @extend .wpsstm-can-click;
                }
            }

            .wpsstm-track-actions,.wpsstm-track-sources{
                ul{
                    list-style: none;
                    padding:0;
                    margin:0;
                }
            }
            .wpsstm-track-actions{
                ul li {
                    label{
                        display:none;
                    }
                    &.wpsstm-action-toggle-favorite:not(.wpsstm-toggle-favorite-active){
                        display:none;
                    }
                }
            }
            .wpsstm-track-sources-list{
                position:relative;
                [data-wpsstm-source-idx]{
                    position:relative;
                }
            }
            
            &.wpsstm-invalid-track{
                background:rgba(255, 0, 0, 0.10);
            }
        }
        
    }

    table.wpsstm-tracks-list{
        table-layout:fixed;
        width:100%;
        tr{
            > * {
                vertical-align: middle;
            }
            .wpsstm-track-image,.wpsstm-track-position,.wpsstm-track-play-bt,.wpsstm-track-actions,.wpsstm-track-sources{
                text-align:center;
            }
            .wpsstm-track-image{
                box-sizing: content-box;
            }
            td{
                &.wpsstm-column-identical-value{
                    display:none;
                }
            }
        }
    }
    
}