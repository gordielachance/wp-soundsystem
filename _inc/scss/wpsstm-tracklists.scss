@import "compass";
@import "wpsstm-shared";

#wpsstm-track-actions{
    .wpsstm-track-action{
        display:inline;
        @include opacity(.5);
        &:hover{
            @include opacity(1);
        }
    }
}

.wpsstm-tracklist{
    position:relative;
    
    .wpsstm-tracklist-icon{
        @extend .fa;
        @include opacity (.15);
    }

    &.tracklist-loading{
        .wpsstm-tracklist-icon{
            @extend .fa-circle-o-notch;
            @extend .fa-spin;
            @extend .fa-fw;
        }
        #wpsstm-tracklist-actions{
            pointer-events:none;
            @include opacity(.5);
        }
    }

    &:not(.tracklist-playing) .wpsstm-tracklist-icon{
        @extend .fa-play;
    }

    &.tracklist-playing .wpsstm-tracklist-icon{
        @extend .fa-pause;
    }
    
    &.tracklist-error .wpsstm-tracklist-icon{
        @extend .fa-exclamation-triangle;
    }
    
    &.tracklist-pause .wpsstm-tracklist-icon{
        @extend .fa-play;
    }
    
    &:not(.wpsstm-loved-tracklist) #wpsstm-tracklist-action-unfavorite{
        display:none;
    }
    
    &.wpsstm-loved-tracklist{
        #wpsstm-tracklist-action-favorite{
            display:none;
        }
    } 

    &:not(.tracklist-expired){
        #wpsstm-tracklist-action-refresh{
            pointer-events:none;
            @include opacity(.5);
        }
    }
    
    &.tracklist-ajaxed{
        
        &:not(.tracklist-refresh) #wpsstm-notice-ajax-refresh{
            display:none;
        }
        
        &.tracklist-refresh{
            > * {
                display:none;
                &.tracklist-header,&.wpsstm-tracklist-notices{
                    display:inherit;
                }
                &.wpsstm-tracklist-notices > *{
                    display:none;
                    &#wpsstm-notice-ajax-refresh{
                        display:inherit;
                    }
                }
                .wpsstm-tracklist-time{
                    display:none;
                }

            }
        }
    }

    &.tracklist-playable{
        
        [itemprop="track"]{

            &[data-wpsstm-sources-count="0"]{
                @include opacity(.25);
            } 

            &:not(.track-active){
                td{
                    @include opacity(.5);
                }
            }

            &.track-has-played,&:hover{
                td{
                    @include opacity(.75);
                }
            }

            &.track-active{
                td{
                    @include opacity(1);
                }
            }

        }
    }
    
    &:not(.tracklist-playable){
        [itemprop="track"]{
            .wpsstm-track-play-bt{
                display:none;
            }
        }
    }

    .wpsstm-tracks-list{

        [itemprop="track"]{

            .wpsstm-track-icon{
                @extend .fa;
            }

            &.track-loading .wpsstm-track-icon{
                @extend .fa-circle-o-notch;
                @extend .fa-spin;
                @extend .fa-fw;
            }
            &:not(.track-playing) .wpsstm-track-icon{
                @extend .fa-play;
            }

            &.track-playing .wpsstm-track-icon{
                @extend .fa-pause;
            }

            &.track-error .wpsstm-track-icon{
                @extend .fa-exclamation-triangle;
            }

            &.track-pause .wpsstm-track-icon{
                @extend .fa-pause;
            }

            &:not(.wpsstm-loved-track) #wpsstm-track-action-unfavorite{
                display:none;
            }
            
            &.wpsstm-loved-track{
                #wpsstm-track-action-favorite{
                    display:none;
                }
            }
            
            &.track-invalid{
                color:red;
            }

            .wpsstm-track-image{
                img{
                    height:2em;
                    width: auto;
                    vertical-align: middle;
                }

            }

           .wpsstm-track-position{

                .wpsstm-player-icon-loading{
                    display:none;
                }
                span{
                    display:initial;
                }
            }

            .wpsstm-track-actions,.wpsstm-track-sources{
                ul{
                    list-style: none;
                    padding:0;
                    margin:0;
                }
            }
            .wpsstm-track-actions{
                ul li {
                    label{
                        display:none;
                    }
                }
            }
            
            &.wpsstm-invalid-track{
                background:rgba(255, 0, 0, 0.10);
            }
        }
        
    }

    table.wpsstm-tracks-list{
        table-layout:fixed;
        width:100%;
        tr{
            > * {
                vertical-align: middle;
            }
            .wpsstm-track-image,.wpsstm-track-position,.wpsstm-track-play-bt,.wpsstm-track-actions,.wpsstm-track-sources{
                text-align:center;
            }
            .wpsstm-track-image{
                box-sizing: content-box;
            }
            td{
                &.wpsstm-column-identical-value{
                    display:none;
                }
            }
        }
    }
    
}

/*
SOURCES
*/

.wpsstm-track-sources-list{
    position:relative;

    //single source
    [data-wpsstm-source-idx]{

        position:relative;
        display:block;
        padding: 0 .75em;
        width:100%;
        box-sizing: border-box;

        @include display-flex();

        .wpsstm-source-links{

            @include order(1);
            @include flex(0 0 auto);
            padding-right: .5em;

            .wpsstm-source-action{
                text-align:center;
                width:2em;
            }
        }

        .wpsstm-source-title{ //source text
            @include order(2);
            @include flex(0 1 auto); /*important*/
            min-width:0;

            @extend .wpsstm-ellipsis;
            overflow:hidden;


        }

        
        
        .wpsstm-source-icon{
            @extend .fa;
        }

        label{
            @extend .wpsstm-can-click;
        }
        &.source-error .wpsstm-source-icon{
            @extend .fa-exclamation-triangle;
            label{
                text-decoration: line-through;
            }
        }
        &.source-playing{
            font-weight: bold;
        }
    }
}